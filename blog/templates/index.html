{% extends 'main.html' %}

{% block title %} The Indus Echo | Home {% endblock %}

{%block page-style%}
<style>
    main {
        background-image: linear-gradient(to top, var(--dark-green), white);
    }

    #top-story-section {
        width: 100%;
        display: flex;
        padding-top: 1em;
    }

    #main-story {
        flex: 55%;

        margin: auto 2.5em;
        height: 17em;

        background-color: rgba(0, 255, 0, 0.5);

        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);

        border-radius: 5px;

        color: rgba(0, 0, 0, 0.7);

        overflow: hidden;
    }

    body {
        overflow-x: hidden;
    }

    #main-story-inner {
        background-color: rgba(0, 0, 0, 0.05);
        width: 100%;
        height: 100%;

        display: flex;
        flex-direction: column-reverse;
        z-index: 2;
    }

    #main-story-inner div {
        padding: 1em;
        z-index: 1;
    }

    #main-story-inner p {
        font-weight: normal;
    }

    #side-stories {
        flex: 40%;
        min-height: 12em;

        margin: auto 1em auto 0;

        padding: 1em;
        color: rgba(0, 0, 0, 0.7);

        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        background-color: rgba(255, 255, 255, 0.3);

        background-color: #B0A4A4;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 1600 800'%3E%3Cg %3E%3Cpath fill='%23bbaba8' d='M486 705.8c-109.3-21.8-223.4-32.2-335.3-19.4C99.5 692.1 49 703 0 719.8V800h843.8c-115.9-33.2-230.8-68.1-347.6-92.2C492.8 707.1 489.4 706.5 486 705.8z'/%3E%3Cpath fill='%23c5b4ac' d='M1600 0H0v719.8c49-16.8 99.5-27.8 150.7-33.5c111.9-12.7 226-2.4 335.3 19.4c3.4 0.7 6.8 1.4 10.2 2c116.8 24 231.7 59 347.6 92.2H1600V0z'/%3E%3Cpath fill='%23cfbfb2' d='M478.4 581c3.2 0.8 6.4 1.7 9.5 2.5c196.2 52.5 388.7 133.5 593.5 176.6c174.2 36.6 349.5 29.2 518.6-10.2V0H0v574.9c52.3-17.6 106.5-27.7 161.1-30.9C268.4 537.4 375.7 554.2 478.4 581z'/%3E%3Cpath fill='%23d7cbb8' d='M0 0v429.4c55.6-18.4 113.5-27.3 171.4-27.7c102.8-0.8 203.2 22.7 299.3 54.5c3 1 5.9 2 8.9 3c183.6 62 365.7 146.1 562.4 192.1c186.7 43.7 376.3 34.4 557.9-12.6V0H0z'/%3E%3Cpath fill='%23DFD7BF' d='M181.8 259.4c98.2 6 191.9 35.2 281.3 72.1c2.8 1.1 5.5 2.3 8.3 3.4c171 71.6 342.7 158.5 531.3 207.7c198.8 51.8 403.4 40.8 597.3-14.8V0H0v283.2C59 263.6 120.6 255.7 181.8 259.4z'/%3E%3Cpath fill='%23e1dccc' d='M1600 0H0v136.3c62.3-20.9 127.7-27.5 192.2-19.2c93.6 12.1 180.5 47.7 263.3 89.6c2.6 1.3 5.1 2.6 7.7 3.9c158.4 81.1 319.7 170.9 500.3 223.2c210.5 61 430.8 49 636.6-16.6V0z'/%3E%3Cpath fill='%23e5e1d8' d='M454.9 86.3C600.7 177 751.6 269.3 924.1 325c208.6 67.4 431.3 60.8 637.9-5.3c12.8-4.1 25.4-8.4 38.1-12.9V0H288.1c56 21.3 108.7 50.6 159.7 82C450.2 83.4 452.5 84.9 454.9 86.3z'/%3E%3Cpath fill='%23e9e7e2' d='M1600 0H498c118.1 85.8 243.5 164.5 386.8 216.2c191.8 69.2 400 74.7 595 21.1c40.8-11.2 81.1-25.2 120.3-41.7V0z'/%3E%3Cpath fill='%23efeeec' d='M1397.5 154.8c47.2-10.6 93.6-25.3 138.6-43.8c21.7-8.9 43-18.8 63.9-29.5V0H643.4c62.9 41.7 129.7 78.2 202.1 107.4C1020.4 178.1 1214.2 196.1 1397.5 154.8z'/%3E%3Cpath fill='%23F5F5F5' d='M1315.3 72.4c75.3-12.6 148.9-37.1 216.8-72.4h-723C966.8 71 1144.7 101 1315.3 72.4z'/%3E%3C/g%3E%3C/svg%3E");
        background-size: cover;

        background-attachment: local;

        border-radius: 5px
    }

    .side-story {
        padding: 1em;
        border-bottom: 1px solid var(--border-color);

        transition: background-color linear 200ms;
    }

    #content {
        display: flex;
        padding: 1em 2em 0 2em;
    }

    .content-column {
        flex: 33%;

        display: flex;
        flex-direction: column;

        padding: 0.5em 0.75em;
        margin: 1em 0.5em;

        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        background-color: rgba(255, 255, 255, 0.5);
        border-radius: 5px;

        color: rgba(0, 0, 0, 0.8);

        min-height: 25em;
    }

    #special-column {
        margin: 0.5em 0;

        box-shadow: none;
        background-color: transparent;
    }

    #board {
        /* background-color: #ffff99;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 1000 1000'%3E%3Cg fill='%23ffd573'%3E%3Cpolygon points='1000 -50 0 -50 500 450'/%3E%3Cpolygon points='550 500 1050 1000 1050 0'/%3E%3Cpolygon points='-50 0 -50 1000 450 500'/%3E%3Cpolygon points='0 1050 1000 1050 500 550'/%3E%3C/g%3E%3Cg fill='%23ffaa4d'%3E%3Cpolygon points='1000 -133.3 0 -133.3 500 366.7'/%3E%3Cpolygon points='633.3 500 1133.3 1000 1133.3 0'/%3E%3Cpolygon points='-133.3 0 -133.3 1000 366.7 500'/%3E%3Cpolygon points='0 1133.3 1000 1133.3 500 633.3'/%3E%3C/g%3E%3Cg fill='%23ff8026'%3E%3Cpolygon points='1000 -216.7 0 -216.7 500 283.3'/%3E%3Cpolygon points='716.7 500 1216.7 1000 1216.7 0'/%3E%3Cpolygon points='-216.7 0 -216.7 1000 283.3 500'/%3E%3Cpolygon points='0 1216.7 1000 1216.7 500 716.7'/%3E%3C/g%3E%3Cg fill='%23F50'%3E%3Cpolygon points='1000 -300 0 -300 500 200'/%3E%3Cpolygon points='800 500 1300 1000 1300 0'/%3E%3Cpolygon points='-300 0 -300 1000 200 500'/%3E%3Cpolygon points='0 1300 1000 1300 500 800'/%3E%3C/g%3E%3Cg fill-opacity='0.5'%3E%3Cpolygon fill='%23FE0' points='0 707.1 0 292.9 292.9 0 707.1 0 1000 292.9 1000 707.1 707.1 1000 292.9 1000'/%3E%3Cg fill='%23ffc800'%3E%3Cpolygon points='464.6 -242.5 -242.5 464.6 464.6 464.6'/%3E%3Cpolygon points='535.4 464.6 1242.5 464.6 535.4 -242.5'/%3E%3Cpolygon points='-242.5 535.4 464.6 1242.5 464.6 535.4'/%3E%3Cpolygon points='535.4 1242.5 1242.5 535.4 535.4 535.4'/%3E%3C/g%3E%3Cg fill='%23ffa200'%3E%3Cpolygon points='405.7 -301.4 -301.4 405.7 405.7 405.7'/%3E%3Cpolygon points='594.3 405.7 1301.4 405.7 594.3 -301.4'/%3E%3Cpolygon points='-301.4 594.3 405.7 1301.4 405.7 594.3'/%3E%3Cpolygon points='594.3 1301.4 1301.4 594.3 594.3 594.3'/%3E%3C/g%3E%3Cg fill='%23ff7b00'%3E%3Cpolygon points='346.8 -360.3 -360.3 346.8 346.8 346.8'/%3E%3Cpolygon points='653.2 346.8 1360.3 346.8 653.2 -360.3'/%3E%3Cpolygon points='-360.3 653.2 346.8 1360.3 346.8 653.2'/%3E%3Cpolygon points='653.2 1360.3 1360.3 653.2 653.2 653.2'/%3E%3C/g%3E%3Cg fill='%23F50'%3E%3Cpolygon points='287.9 -419.2 -419.2 287.9 287.9 287.9'/%3E%3Cpolygon points='712.1 287.9 1419.2 287.9 712.1 -419.2'/%3E%3Cpolygon points='-419.2 712.1 287.9 1419.2 287.9 712.1'/%3E%3Cpolygon points='712.1 1419.2 1419.2 712.1 712.1 712.1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-attachment: local;
        background-size: cover;

        background-position: center; */

        /* box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); */

        height: 100%;
        width: 100%;

        margin: auto;

        border-radius: 5px;
        text-align: center;


        background: none;
    }

    #board-inner {
        height: 100%;
        width: 100%;

        margin: auto;

        display: flex;
        flex-direction: column;

        text-align: center;

        background-color: rgba(0, 0, 0, 0.2);

        border-radius: inherit;

        color: white;
    }

    #board-heading {
        font-size: xx-large;
        font-weight: bold;

        margin-top: 1.5em;
    }

    #today-date {
        margin-top: 1em;
    }

    #message {
        margin: 4em 1.5em 0 1.5em;
    }

    .article {
        border-bottom: 1px solid var(--border-color);
        padding: 1em 1em;
        border-radius: 5px;

        transition: background-color linear 200ms;
    }

    .date {
        color: rgba(0, 0, 0, 0.8);
        font-size: small;
        font-style: italic;
    }

    :root {
        --horizontal-margin: 7em;
    }

    @media (max-width: 1100px) {
        #board {
            width: 100%;
        }
    }

    @media (max-width: 650px) {
        :root {
            --horizontal-margin: 3em;
        }
    }

    @media (max-width: 950px) {
        #top-story-section {
            flex-direction: column;
        }

        #main-story {
            margin: 1em var(--horizontal-margin);
        }

        #main-story-inner {
            height: 17em;
        }

        #side-stories {
            margin: 1em var(--horizontal-margin);
        }

        #content {
            flex-direction: column;
            padding: 0;
        }

        .content-column {
            margin: 1em var(--horizontal-margin);
        }

        #special-column {
            display: none;
        }
    }

    .border-none {
        border: none;
    }

    #crescent-parent {
        position: relative;
        width: 0;
        height: 0;
    }

    #crescent {
        position: absolute;
        width: 20em;

        top: -0.5em;
        left: 2em;

        z-index: 1;
    }

    #star {
        position: absolute;

        width: 5em;
        top: 30px;
        left: 232px;

        z-index: 2;

        animation: spin 5s infinite linear;
    }

    @keyframes spin {
        0% {
            transform: rotate(360deg);
        }
    }

    .selected {
        background-color: rgba(255, 255, 255, 0.15);
    }

    .hide-article-preview {
        display: none;
    }

    .article-preview p {
        margin: 0.5em 0;
    }
</style>
{%endblock%}

{% block script %}
<script type="module">

    var func = async () => {
        var articles = document.getElementsByClassName('preview-available')
        var previews = document.getElementsByClassName('article-preview')

        while (true) {
            for (let i = 0; i < articles.length; i++) {
                articles[i].classList.add('selected')
                previews[i].classList.remove('hide-article-preview')

                await await new Promise(r => setTimeout(r, 1000));
                articles[i].classList.remove('selected')
                previews[i].classList.add('hide-article-preview')
            }
        }
    }

    await func()

</script>
{% endblock %}

{% block main %}
<section id="top-story-section">
    <div id="main-story">
        <div id="crescent-parent">
            <svg id='star' fill="#ffffff" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <title>star</title>
                    <path
                        d="M3.488 13.184l6.272 6.112-1.472 8.608 7.712-4.064 7.712 4.064-1.472-8.608 6.272-6.112-8.64-1.248-3.872-7.808-3.872 7.808z">
                    </path>
                </g>
            </svg>
            <svg id="crescent" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img"
                class="iconify iconify--emojione-monotone" preserveAspectRatio="xMidYMid meet" fill="#ffffff"
                transform="matrix(-1, 0, 0, 1, 0, 0)">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path
                        d="M43.139 2a29.885 29.885 0 0 1 5.121 16.756c0 16.701-13.686 30.24-30.57 30.24a30.656 30.656 0 0 1-15.689-4.285C7.209 54.963 17.93 62 30.318 62C47.816 62 62 47.969 62 30.66C62 17.867 54.246 6.871 43.139 2z"
                        fill="#ffffff"></path>
                </g>
            </svg>
        </div>
        <div id="main-story-inner">
            <div>
                <a href="/post/{{ top_story.slug }}">
                    <h1> {{ top_story.title }} </h1>
                    <p> {{ top_story.desc }} </p>
                </a>
            </div>
        </div>
    </div>
    <div id="side-stories">
        {% for story in secondary_stories %}
        <div class="side-story {% if forloop.last %} {{'border-none'}} {% endif %} preview-available">
            <a href="/post/{{ story.slug }}">{{ story.title }} <br><span class="date">~ {{ story.date }}</span></a>
        </div>
        {% endfor %}
    </div>
</section>
<section id="content">
    {% load slice %}
    <div class="content-column">
        {% for story in articles|slice:"0:4" %}
        <div class="article {% if forloop.last %} {{'border-none'}} {% endif %} preview-available">
            <a href="/post/{{ story.slug }}">{{ story.title }} <br><span class="date">~ {{ story.date }}</span></a>
        </div>
        {% endfor %}
    </div>
    <div class="content-column">
        {% for story in articles|slice:"4:8" %}
        <div class="article {% if forloop.last %} {{'border-none'}} {% endif %} preview-available">
            <a href="/post/{{ story.slug }}">{{ story.title }} <br><span class="date">~ {{ story.date }}</span></a>
        </div>
        {% endfor %}
    </div>
    <div class="content-column">
        {% for story in secondary_stories %}
        <div class="article-preview hide-article-preview">
            <a href="/post/{{ story.slug }}">
                {% for preview in story.previews %}
                <p>
                    {{ preview }}
                </p>
                {% endfor %}
            </a>
        </div>
        {% endfor %}
        {% for story in articles %}
        <div class="article-preview hide-article-preview">
            <a href="/post/{{ story.slug }}">
                {% for preview in story.previews %}
                <p>
                    {{ preview }}
                </p>
                {% endfor %}
            </a>
        </div>
        {% endfor %}
    </div>
</section>
{% endblock %}